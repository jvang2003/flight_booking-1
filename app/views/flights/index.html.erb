<h1>Flights Booking</h1>

<%= form_tag('/flights', method: 'get') do %>
	<p> 
	From airport: <%= select_tag(:start_airport, options_for_select(@airports)) %>
	</p>
	<p> 
	To airport: <%= select_tag(:finish_airport, options_for_select(@airports)) %>
	</p>
	<p>
	Date: <%= select_tag(:date, options_for_select(@flight_dates)) %>	
	</p>
	<p>
	Tickets: <%= select_tag(:tickets, options_for_select(@number_of_tickets)) %>	
	</p>
	<p>
	<%= submit_tag('Search') %>	
	</p>
<% end %>

<% unless @search.nil? %>
<%= form_tag(new_booking_path, method: 'get') do %>
	<table>
		<thead>
			<tr>
				<th>Select</th>
				<th>From</th>
				<th>To</th>
				<th>Date</th>
				<th>Duration</th>
			</tr>
		</thead>
		<tbody>
		<% @search.each do |result| %>
		  <tr>
		  	<td><%= radio_button_tag(:flight_id, result.id) %></td>
			<td><%= result.from_airport.code %></td>
			<td><%= result.to_airport.code %></td>
			<td><%= result.format_date %></td>
			<td><%= result.flight_duration %></td>
			<%= hidden_field_tag(:tickets, @tickets) %>
		  <tr>
		  <% end %>
		</tbody>
	</table>
	<%= submit_tag('Select Flight') %>
<% end %>
<% end %>